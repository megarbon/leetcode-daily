<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="author" content="Melaku Garcia Bonacho" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Melaku Garcia</title>
		<script>
			//Ej 1 Definicion del objeto
			class Producto {
				constructor(id, nombre, cantidad) {
					this.id = id;
					this.nombre = nombre;
					this.cantidad = cantidad;
				}

				//Ej 1.5 formatear salida
				formatearNombre() {
					//si solo se pueden usar metodos de string el unico valido seria toUpperCase por ahora
					let nombreString = this.nombre.split("");
					nombreString[0] = nombreString[0].toUpperCase();
					this.nombre = nombreString.join("");
					return this.nombre;
				}
			}

			//Ej 2 Pedir datos producto
			let pedirDatosProducto = (Producto) => {
				Producto.id = prompt("Introduce el id: ");
				Producto.nombre = prompt("Introduce el nombre: ");
				//hacemos que se guarde el nombre bien formateado
				Producto.nombre = Producto.formatearNombre();
				Producto.cantidad = prompt("Introduce la cantidad: ");
				return Producto;
			};

			//Ej2 crear array de 5 productos usando push
			var listaProductos = [];
			for (let i = 0; i < 5; i++) {
				let p = new Producto();
				//listaProductos.push(pedirDatosProducto(p));
				//esto esta comentado para que no me pida prompt cada vez que recargo... descomentar al probarlo
			}

			//utilizo esta forma de crear los productos para no tener que meter un 15 prompts cada vez que recargo la pagina
			p1 = new Producto(1, "Camisa", 10);
			p2 = new Producto(2, "Ropa", 55);
			p3 = new Producto(3, "Comida", 3);
			p4 = new Producto(4, "Nevera", 999);
			p5 = new Producto(5, "PC", 100);
			p6 = new Producto(8, "PC", 50);
			invetario = [p1, p2, p3, p4, p5, p6];

			//console.log(invetario);

			//Ej 3 Obtener stock

			let stock = (arreglo) => {
				let mapa = new Map();

				arreglo.forEach((element) => {
					if (mapa.has(element.nombre)) {
						console
							.log
							//"ese elemento ya estaba en el mapa, vamos a sumar la cantidad al stock...",
							();
						//si el elemento ya estaba solo sumamos el valor nuevo a la cantidad ya existente
						mapa.set(
							element.nombre,
							mapa.get(element.nombre) + element.cantidad,
						);
					} else {
						//console.log("ese elemento es nuevo, vamos a crearlo...");
						mapa.set(element.nombre, element.cantidad);
					}
				});

				return mapa;
			};

			const mapaStock = stock(invetario);
			//console.log(stock(invetario));

			//EJ 4 imprimir resultado con formato

			let imprimirResultadoMap = (mapaStock) => {
				let resultado = [];
				console.log(mapaStock);

				//creo un array a partir del mapa y asi puedo acceder comodamente a cada pareja clave valor
				arrayMap = [...mapaStock];
				arrayMap = arrayMap.flat();
				console.log(arrayMap);

				console.log(`Inventario acumulado\n`);
				for (let i = 0; i < arrayMap.length; i++) {
					//si la i es par es decir una palabra, entonces formatea como palabra con flecha sino pues formatea como numero con el salto de linea
					i % 2 == 0
						? resultado.push(`${arrayMap[i]} ===> `)
						: resultado.push(`${arrayMap[i]}\n`);
				}
				//devolvemos un string
				console.log(...resultado);
			};

			//se hace uso de funciones flecha, spread y otros operadores de ES6

			imprimirResultadoMap(mapaStock);
		</script>
	</head>
	<body></body>
</html>
