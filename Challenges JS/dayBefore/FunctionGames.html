<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Games</title>
    <script>
      // Partida de dados ✅
      // Adivina la palabra ✅
      // cadena invertida ✅
      // Cadena mas larga ✅
      // Palindromo ✅

      /* Solucion sencilla
      function jugarDados(rondas) {
        var total = 0;
        var lanzamiento = () => Math.random() * 5 + 1;

        while (rondas) {
          total += lanzamiento();
          rondas--;
        }

        var sumaTotal = () => total;

        return sumaTotal();
      }
      */
      /* Solucion psicopata */
      function jugarDados(rondas) {
        var lanzamiento = () => Math.floor(Math.random() * 6) + 1;

        return Array.from({ length: rondas }, () => lanzamiento()).reduce(
          (acc, valor) => acc + valor,
          0
        );
      }

      function adivinarPalabra(palabra) {
        const secret = "Carlos";
        const secretArray = [...secret.toLowerCase()];
        const palabraArray = [...palabra.toLowerCase()];

        if (secretArray.length !== palabraArray.length) {
          console.log("Introduce palabra de la misma longitud, por favor.");
        } else {
          let encontradas = new Map();
          palabraArray.forEach((letra, index) => {
            const foundIndex = secretArray.findIndex((elem) => elem === letra);
            if (foundIndex !== -1) {
              encontradas.set(index, letra);
            }
          });

          //formateamos la respuesta final y seguimos dentro del mismo else...
          if (encontradas.size === 0) {
            console.log("No se encontraron coincidencias.");
          } else if (encontradas.size !== palabraArray.length) {
            const salidaFormat = Array.from(encontradas)
              .map(([index, letra]) => `Posición ${index}: ${letra}`)
              .join(", ");
            console.log(`Letras encontradas: ${salidaFormat}`);
          } else {
            console.log(`¡Oleeee! Has adivinado la palabra: ${palabra}`);
          }
        }
      }

      function cadenaInvertida(cadena) {
        cadenaArray = [...cadena];
        cadenaInvertida = [];
        for (let i = cadenaArray.length - 1; i >= 0; i--) {
          cadenaInvertida.push(cadena[i]);
          //cadenaInvertida[cadenaArray.length - i] = cadenaArray[i];  version algo menos elegante
        }
        return cadenaInvertida.join("");
      }

      //solucion algo de psicopata tambien pero se entiende
      const cadenaMasLarga = (cad1, cad2) =>
        cad1.length > cad2.length
          ? `la primera cadena (${cad1}) es mas larga que la segunda (${cad2})`
          : cad1.length == cad2.length
          ? `Las 2 cadenas son igual de largas`
          : `la segunda cadena (${cad2}) es mas larga que la primera (${cad1})`;

      const isPalindromo = (cadena) => {
        const cadenaInvertida = cadena
          .toLowerCase()
          .split("")
          .reverse()
          .join("");
        return cadena.toLowerCase() === cadenaInvertida;
      };

      //Pruebas de ejecucion

      console.log(jugarDados(50));
      console.log(jugarDados(3));

      console.log(adivinarPalabra("Carmen"));
      console.log(adivinarPalabra("Juanjo"));
      console.log(adivinarPalabra("Carlos"));

      console.log(cadenaInvertida("amadeo"));

      console.log(cadenaMasLarga("carlitos", "eva"));
      console.log(cadenaMasLarga("ana", "eva"));

      console.log(isPalindromo("roma"));
      console.log(isPalindromo("ono"));
    </script>
  </head>
  <body></body>
</html>
